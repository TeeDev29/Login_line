<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loginline</title>
</head>
<body>
    <h1>home</h1>
    <img id="pictureUrl">
    <p id="displayName"><b>displayname :</b></p>
    <p id="statusMessage"><b>statusMessage :</b></p>
    <script src="https://static.line-scdn.net/liff/edge/versions/2.3.0/sdk.js"></script>


    <script>
        async function main(){
            await liff.init({ liffId: "1656995307-EjVY6XDg" })
            if(liff.isLoggedIn){
                getUserProfile()
          
            }else{
                liff.login()
            }
        }
        main()


        async function getUserProfile(){
            const profile = await liff.getProfile()
            document.getElementById("pictureUrl").src = profile.pictureUrl
            document.getElementById("displayName").append(profile.displayName)
            document.getElementById("statusMessage").append(profile.statusMessage)
        }


        function logOut() {
            liff.logOut()
            window.location.reload()
        }

    </script>

</body>
</html>

 -->


 <!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LIFF - LINE Front-end Framework</title>
    <style>
      body {
        margin: 16px;
      }
      button,
      img {
        display: none;
        width: 40%;
      }
      button {
        padding: 16px;
      }
    </style>
  </head>
  <body>
    <h1>Page 2</h1>
    <img id="pictureUrl" />
    <p id="name"></p>
    <p id="id"></p>
    <button id="btnLogIn" onclick="logIn()">Log In</button>
    <button id="btnLogOut" onclick="logOut()">Log Out</button>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
      function logOut() {
        liff.logout();
        window.location.reload();
      }
      function logIn() {
        liff.login({ redirectUri: window.location.href });
      }
      async function getUserProfile() {
        const profile = await liff.getProfile();
        document.getElementById("name").append(profile.displayName)
        document.getElementById("id").append(profile.userId)
        console.log(profile);
        
        document.getElementById('pictureUrl').style.display = 'block';
        document.getElementById('pictureUrl').src = profile.pictureUrl;
      }
      async function main() {
        await liff.init({ liffId: '1656995307-EjVY6XDg' });
        if (liff.isInClient()) {
          getUserProfile();
        } else {
          if (liff.isLoggedIn()) {
            getUserProfile();
            document.getElementById('btnLogIn').style.display = 'none';
            document.getElementById('btnLogOut').style.display = 'block';
          } else {
            document.getElementById('btnLogIn').style.display = 'block';
            document.getElementById('btnLogOut').style.display = 'none';
          }
        }
      }
      main();
    </script>
  </body>
</html>

